<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aplikacja do zarządzania listą zadań">
    <title>DevSecOps ToDo App</title>
</head>
<body>
    <header>
        <h1>Lista Zadań</h1>
    </header>
    <main>
        <section aria-label="Lista zadań">
            <ul>
                {% for todos in todo %}
                    <li>
                        <input type="checkbox" 
                               id="todo-{{ todos['id'] }}"
                               aria-label="Status wykonania zadania '{{ todos['task'] }}'" 
                               {% if todos['done'] %} checked {%endif%} 
                               disabled>
                        <label for="todo-{{ todos['id'] }}">
                            <span {%if todos['done'] %} style="text-decoration: line-through" {%endif%}>{{ todos['task'] }}</span>
                        </label>
                        <a href="{{ url_for('check', index=todos['id']) }}" aria-label="Oznacz '{{ todos['task'] }}' jako wykonane">Check</a>
                        <a href="{{ url_for('edit', index=todos['id']) }}" aria-label="Edytuj '{{ todos['task'] }}'">Edit</a>
                        <a href="{{ url_for('delete', index=todos['id']) }}" aria-label="Usuń '{{ todos['task'] }}'">Delete</a>
                    </li>
                {% endfor %}
            </ul>
        </section>
        <section aria-label="Dodaj nowe zadanie">
            <form action="{{ url_for('add') }}" method="post">
                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                <label for="todo-input">Nowe zadanie:</label>
                <input type="text" 
                       id="todo-input" 
                       name="todos" 
                       required 
                       minlength="1" 
                       maxlength="200"
                       aria-required="true"
                       aria-label="Wpisz treść nowego zadania">
                <button type="submit">Add ToDo</button>
            </form>
        </section>
    </main>
</body>
</html>